(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9d35"],{3530:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-10 mx-auto mt-5"},[a("el-input",{attrs:{placeholder:"请输入搜索条件",clearable:!0},on:{change:t.searchByKeyword},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.productList,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"_id",label:"id",width:"230"}}),a("el-table-column",{attrs:{fixed:"",prop:"pet",label:"宠物类别",width:"120"}}),a("el-table-column",{attrs:{prop:"name",label:"名字",width:"300"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌名",width:"120"}}),a("el-table-column",{attrs:{prop:"category",label:"类别",width:"120"}}),a("el-table-column",{attrs:{prop:"flavour",label:"香味",width:"120"}}),a("el-table-column",{attrs:{prop:"package",label:"包装",width:"120"}}),a("el-table-column",{attrs:{prop:"price",label:"价钱",width:"120"}}),a("el-table-column",{attrs:{prop:"productImg",label:"图片",width:"300"}}),a("el-table-column",{attrs:{prop:"size",label:"大小",width:"120"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editProduct(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteProduct(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"mt-5",attrs:{background:"","current-page":t.currentPage,"page-size":12,layout:"prev, pager, next,total",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),a("el-dialog",{attrs:{title:"修改记录",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[t._l(t.productListInfo,(function(e,o){return a("div",{key:o},[t._v(" "+t._s(e.title)+" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.updateProductInfo[e.name],callback:function(a){t.$set(t.updateProductInfo,e.name,a)},expression:"updateProductInfo[i.name]"}})],1)})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateProduct}},[t._v("更 新")])],1)],2),a("el-dialog",{attrs:{title:"新填记录",visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[t._l(t.productListInfo,(function(e,o){return a("div",{key:o},[t._v(" "+t._s(e.title)+" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.newProductInfo[e.name],callback:function(a){t.$set(t.newProductInfo,e.name,a)},expression:"newProductInfo[i.name]"}})],1)})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("添 加")])],1)],2)],1)},i=[],n={data:function(){return{currentPage:0,keyword:"",editDialogVisible:!1,updateProductInfo:{_id:"",brand:"",category:"",displayName:"",flavour:"",name:"",package:"",pet:"",price:"",productImg:"",size:""},addDialogVisible:!1,newProductInfo:{brand:"",category:"",displayName:"",flavour:"",name:"",package:"",pet:"",price:"",productImg:"",size:""}}},computed:{productList:function(){return this.$store.state.productList.product},total:function(){return this.$store.state.productList.total},productDetail:function(){return this.$store.state.productDetail},productListInfo:function(){return[{name:"pet",title:"宠物类别"},{name:"name",title:"名字"},{name:"brand",title:"品牌名"},{name:"category",title:"类别"},{name:"flavour",title:"香味"},{name:"package",title:"包装"},{name:"price",title:"价钱"},{name:"productImg",title:"图片"},{name:"size",title:"大小"}]}},mounted:function(){this.getData()},methods:{searchByKeyword:function(){this.$store.dispatch("searchProductList",{page:0,pageSize:8,keyword:this.keyword})},getData:function(){this.keyword="",this.$store.dispatch("searchProductList",{page:0,pageSize:8})},handleCurrentChange:function(t){this.$store.dispatch("searchProductList",{page:t-1,pageSize:8})},editProduct:function(t){var e=this;this.$store.dispatch("getProductDetail",t._id).then((function(){e.editDialogVisible=!0,e.updateProductInfo=e.productDetail}))},updateProduct:function(){var t=this;this.$store.dispatch("updateProduct",this.updateProductInfo).then((function(){t.editDialogVisible=!1,t.getData(),t.$message({type:"success",message:"更新成功!"})})).catch((function(){t.$message({type:"error",message:"更新失败!"})}))},addProduct:function(){var t=this;this.$store.dispatch("createProduct",this.newProductInfo).then((function(){t.addDialogVisible=!1,t.getData(),t.$message({type:"success",message:"添加成功!"})})).catch((function(){t.$message({type:"error",message:"添加失败!"})}))},deleteProduct:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$store.dispatch("deleteProduct",t._id).then((function(){e.getData(),e.$message({type:"success",message:"删除成功!"})}))}))}}},r=n,l=a("2877"),c=Object(l["a"])(r,o,i,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0b9d35.1ca2301b.js.map